# @configure_input@

package        = @PACKAGE_NAME@
version        = @PACKAGE_VERSION@
tarname        = @PACKAGE_TARNAME@
distdir        = $(tarname)-$(version)

prefix         = @prefix@
exec_prefix    = @exec_prefix@
bindir         = @bindir@

# VPATH-related substitution variables
srcdir         = @srcdir@
VPATH          = @srcdir@

# compiler macres
CXX            = @CXX@
CXXFLAGS       = @CXXFLAGS@ -std=c++0x
INSTALL        = @INSTALL@
INSTALL_PROGRAM= @INSTALL_PROGRAM@
LIBS           = @LIBS@
DEFS           = @DEFS@

SRC= $(wildcard $(srcdir)/*.cpp)
OBJ= $(SRC:.cpp=.o)

INCLUDES=-iquote $(srcdir) -iquote . -I $(srcdir)/..

Makefile: Makefile.in ../config.status

../config.status: ../configure
	cd .. && ./config.status --recheck

all: $(package)

prec.h.gch: prec.h
	$(CXX) $(DEFS) $(CXXFLAGS) $(CPPFLAGS) $(INCLUDES) -x c++-header -c $<

$(package): prec.h.gch $(OBJ)
	$(CXX) $(DEFS) $(CXXFLAGS) $(CPPFLAGS) -o $@ $(OBJ) $(LIBS)

%.o: %.cpp
	$(CXX) $(DEFS) $(CXXFLAGS) $(CPPFLAGS) $(INCLUDES) -o $@ -c $<
    
clean:
	-rm -f $(OBJ)
	-rm -f $(package)
	-rm -f prec.h.gch

install:
	$(INSTALL) -d $(DESTDIR)$(bindir)
	$(INSTALL_PROGRAM) -m 0755 $(srcdir)/$(package) $(DESTDIR)$(bindir)/$(package)

uninstall:
	-rm $(DESTDIR)$(bindir)/$(package)

.PHONY: all clean install uninstall
